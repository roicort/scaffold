---
import { Image } from 'astro:assets';
import type { ImageMetadata } from 'astro';
import BaseLayout from './BaseLayout.astro';
import FormattedDate from '../components/FormattedDate.astro';
import Prose from '../components/Prose.astro';
import { slugify, withBase } from '../utils/slugify';

interface Props {
	title: string;
	description: string;
	pubDate: Date;
	updatedDate?: Date;
	heroImage?: ImageMetadata;
	Content?: any;
	tags?: string[];
}

const { title, description, pubDate, updatedDate, heroImage, tags = [], Content } = Astro.props as Props;
---

<BaseLayout title={title} description={description} image={heroImage}>
	<div class="flex-1 flex flex-col py-12 md:py-16 lg:py-20 space-y-16">
	<article class="post-page max-w-4xl w-full mx-auto">
		<header class="section-heading">
			<p class="eyebrow">Project</p>
			<h1>{title}</h1>
			<p class="post-meta">
				<FormattedDate date={pubDate} />
				{updatedDate && (
					<span>
						&middot; Updated <FormattedDate date={updatedDate} />
					</span>
				)}
			</p>
			{tags.length > 0 && (
				<ul class="mt-2 flex flex-wrap gap-2 text-sm text-muted">
					{tags.map((tag) => (
						<li class="inline-flex items-center gap-2 rounded-full border border-border bg-surface px-3 py-1">
							<a class="hover:text-ink" href={withBase(`/tags/${slugify(tag)}/`)}>{tag}</a>
						</li>
					))}
				</ul>
			)}
		</header>

		{heroImage && (
			<figure class="post-hero-image">
				<Image width={1020} height={510} src={heroImage} alt="" />
			</figure>
		)}

		<section class="post-article">
			<Prose>
				{Content ? <Content /> : <slot />}
			</Prose>
		</section>
	</article>
	</div>
</BaseLayout>
