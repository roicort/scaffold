---
import { SITE_TITLE } from '../consts';
import { getCollection } from 'astro:content';
import Clock from './Clock.astro';

const today = new Date();
const socials = (await getCollection('socials')).flatMap((entry) =>
  Array.isArray(entry.data) ? entry.data : [entry.data],
);
---

<footer class="mt-12 border-t border-[color:var(--color-border)] bg-[color:var(--color-surface)] px-5 md:px-7 py-8">
  <div class="mx-auto w-full max-w-6xl px-0 md:px-2">
    <div class="grid gap-10 border-b border-[color:var(--color-border)] pb-10 md:grid-cols-2">
      <div class="space-y-6">
        <p class="text-3xl sm:text-4xl font-semibold tracking-tight text-ink">Resources</p>
        <div class="grid gap-2 sm:grid-cols-2 text-sm text-muted">
          <a class="transition-colors hover:text-ink" href="https://astro.build" target="_blank">Astro Docs</a>
          <a class="transition-colors hover:text-ink" href="https://docs.astro.build/en/guides/content-collections/" target="_blank">Content collections</a>
          <a class="transition-colors hover:text-ink" href="https://tailwindcss.com/docs" target="_blank">Tailwind docs</a>
          <a class="transition-colors hover:text-ink" href="https://github.com/withastro/astro" target="_blank">Astro GitHub</a>
        </div>
      </div>
      <div class="grid gap-8">
        <div class="grid gap-3">
          <p class="text-3xl sm:text-4xl font-semibold tracking-tight text-ink">Connect</p>
          <div class="grid gap-2 sm:grid-cols-2 text-sm text-muted">
            {socials.map((social) => (
              <a
                href={social.href}
                target={social.href.startsWith('http') ? '_blank' : undefined}
                rel={social.href.startsWith('http') ? 'noreferrer' : undefined}
                class="flex items-center gap-2 transition-colors hover:text-ink"
              >
                <span>{social.label}</span>
              </a>
            ))}
          </div>
        </div>
        <div class="grid gap-3">
          <p class="text-3xl sm:text-4xl font-semibold tracking-tight text-ink">Navigation</p>
          <div class="grid gap-2 sm:grid-cols-2 text-sm text-muted">
            <a class="transition-colors hover:text-ink" href="/">Home</a>
            <a class="transition-colors hover:text-ink" href="/blog">Blog</a>
            <a class="transition-colors hover:text-ink" href="/about">About</a>
            <a class="transition-colors hover:text-ink" href="/rss.xml">RSS</a>
          </div>
        </div>
      </div>
    </div>
    <div class="grid gap-6 pt-8 pb-4 md:flex md:items-center md:justify-between">
      <p class="text-sm text-muted m-0">&copy; {today.getFullYear()} {SITE_TITLE}. All rights reserved.</p>
      <div class="md:text-right space-y-2 md:space-y-1">
        <div class="flex flex-wrap items-center gap-3 md:justify-end">
          <p class="text-2xl sm:text-3xl font-semibold tracking-tight text-ink m-0">CDMX, MÃ©xico</p>
          <Clock
            label=""
            timeZone="America/Mexico_City"
            locale="es-MX"
            class="text-sm font-semibold text-ink"
          />
        </div>
        <p class="text-sm text-subtle m-0">Designed for a content + agency scaffold.</p>
      </div>
    </div>
  </div>
</footer>
