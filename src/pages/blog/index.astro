---
import { getCollection } from 'astro:content';
import Card from '../../components/Card.astro';
import PageLayout from '../../layouts/PageLayout.astro';
import { SITE_DESCRIPTION, SITE_TITLE } from '../../consts';

const posts = (await getCollection('blog')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
const [featured, ...rest] = posts;
---

<PageLayout title={`Blog Â· ${SITE_TITLE}`} description={SITE_DESCRIPTION}>
	<section class="max-w-5xl mx-auto px-5 md:px-8 py-12 space-y-8">

		{featured && (
			<div class="grid grid-cols-1">
				<Card
					title={featured.data.title}
					href={`/blog/${featured.id}/`}
					description={featured.data.description}
					date={featured.data.pubDate}
					image={featured.data.heroImage}
					imageAlt={featured.data.title}
					variant="post"
				/>
			</div>
		)}

		{rest.length > 0 && (
			<div class="grid grid-cols-1 md:grid-cols-2 gap-6 lg:gap-8">
				{rest.map((post) => (
					<Card
						title={post.data.title}
						href={`/blog/${post.id}/`}
						description={post.data.description}
						date={post.data.pubDate}
						image={post.data.heroImage}
						imageAlt={post.data.title}
						variant="post"
					/>
				))}
			</div>
		)}
	</section>
</PageLayout>
